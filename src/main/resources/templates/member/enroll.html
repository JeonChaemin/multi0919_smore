<!doctype html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>


  <meta charset="utf-8" />
  <title>smore | Sign up</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content=" " />
  <meta name="keywords" content="" />
  <meta content="Themesdesign" name="author" />

 	<!-- App favicon -->
	<link rel="shortcut icon" th:href="@{/images/favicon.ico}">

	<!-- Choise Css -->
	<link rel="stylesheet" th:href="@{/libs/choices.js/public/assets/styles/choices.min.css}">

	<!-- Swiper Css -->
	<link rel="stylesheet" th:href="@{/libs/swiper/swiper-bundle.min.css}">

	<!-- Bootstrap Css -->
	<link th:href="@{/css/bootstrap.min.css}" id="bootstrap-style" rel="stylesheet" type="text/css" />
	<!-- Icons Css -->
	<link th:href="@{/css/icons.min.css}" rel="stylesheet" type="text/css" />
	<!-- App Css-->
	<link th:href="@{/css/app.min.css}" id="app-style" rel="stylesheet" type="text/css" />
	<!-- Pretendard Font -->
	<link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard-dynamic-subset.css" />
	<!-- Font Awesome CSS -->
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  	<script src="https://kit.fontawesome.com/dd4a6a23ab.js" crossorigin="anonymous"></script>
  
  <!--Custom Css-->
  <link th:href="@{/css/sign.css}" id="custom" rel="stylesheet" type="text/css" />
  <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

  <!--  다음 우편번호 script  -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>

<body>
  <!--start page Loader -->
  <div id="preloader">
    <div id="status">
      <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </div>
  </div>
  <!--end page Loader -->

  <!-- Begin page -->
  <div>


    <div class="main-content">

      <div class="page-content">

        <!-- START SIGN-UP -->
        <section class="bg-auth">
          <div class="container">
            <div class="row justify-content-center">
              <div class="col-xl-10 col-lg-12">
                <div class="card auth-box">
                  <div class="row align-items-center">
                    <div class="col-lg-6 text-center">
                      <div class="card-body p-4">
                        <a th:href="@{/}"><img th:src="@{/images/logo-dark.png}" alt="" class="logo-dark" style="margin-top:30px;"></a>
                        <div class="mt-5">
                          <img th:src="@{/images/auth/sign-up.png}" alt="" class="img-fluid" style="margin-bottom:60px;">
                        </div>
				<!-- 
                        <button class="btn btn-hover kakao w-100" onMouseOver="this.style.background='#f9e000'"style="margin-top:80px; margin-left:10px;">
                          <img class="btn-social-icon" th:src="@{/images/kakao.svg}">
                        <a class="kakao" href="https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=db9b4636697b685acdb60e2cfea3d1e0&redirect_uri=http://localhost/member/enroll/kakao">카카오 아이디로 <span class="d-none d-sm-inline">시작하기</span></a></button>
				 -->
                     
                     <!-- 
                        <button class="btn btn-hover naver w-100" style="margin-bottom:10px; margin-left:10px;">
                        <img class="btn-social-icon" th:src="@{/images/naver.svg}"> 네이버 아이디로 <span class="d-none d-sm-inline">시작하기</span></button>
                        <br>
                      -->   
                      </div>
                    </div><!--end col-->
                    <div class="col-lg-6">
                      <div class="auth-content card-body p-5 text-white" style="background-color: #766df4;">
                        <div class="w-100">
                          <div class="text-center">
                            <h5>회원가입</h5>
                            <p class="text-white-70">가입 후 스모어의 모든 기능을 이용해보세요</p>
                          </div>
                          <br>
                          	<form id="enroll-container" name="memberEnrollFrm" th:action="@{/member/enroll}" method="post" class="auth-form">
                            <div class="mb-3">
                              <span>
                             	 <label for="userIdInput" class="form-label" style="margin-right:30px;">아이디 </label>
                           		 <th:block th:if="${kakaoMap} != null">
                              		<input type="text" th:value="${kakaoMap.email}" class="form-control" name="memberId" style="display:inline; width:50%;" id="memberId" placeholder="아이디 입력" required/>
                             		<button type="button" class="btn btn-white btn-hover w-20" style="display:inline; margin-left:3px;" id="checkDuplicate" value="중복검사">중복 확인</button>
                              		<input type="hidden" name="kakaoToken" th:value="${kakaoMap.id}">
                           		</th:block>
                           		<th:block th:if="${kakaoMap} == null">
                              		<input type="text" class="form-control" name="memberId" style="display:inline; width:50%;" id="memberId" placeholder="아이디 입력" required/>
                              		<button type="button" class="btn btn-white btn-hover w-20" style="display:inline; margin-left:3px;" id="checkDuplicate" value="중복검사">중복 확인</button>
                           		</th:block>
                              </span>
                            </div>
                            
                            <div class="text-center"></div>
                            <br>

                            <div class="mb-3">
                              <label for="passwordInput" class="form-label" style="margin-right:50px;">비밀번호</label>
                              <input type="password" class="form-control" name="password" id="pass1"  style="display:inline; width:70%;"  placeholder="특수문자, 영문, 숫자를 포함한 8자 이상"/>
                            </div>
                            
                            <div class="mb-3">
                              <label for="emailInput" class="form-label" style="margin-right:20px;">비밀번호 확인</label>
                              <input type="password" class="form-control" id="pass2" style="display:inline; width:70%;" placeholder="비밀번호 확인" required/> 
                            </div>
                            
                              <div class="mb-3">
                              	<label for="usernameInput" class="form-label" style="margin-right:75px;">이름</label>
                              		<th:block th:if="${kakaoMap} != null">
                              			<input type="text" th:value="${kakaoMap.nickname}" class="form-control" required name ="name" style="display:inline; width:70%;" placeholder="이름 입력"/>
                              		</th:block>
                                	<th:block th:if="${kakaoMap} == null">
                              			<input type="text" class="form-control" required name ="name" style="display:inline; width:70%;" placeholder="이름 입력"/>
                              		</th:block>
                              
                            </div>
                               <div class="mb-3">
                              <label for="emailInput" class="form-label" style="margin-right:60px;">이메일</label>
                              <input type="email" class="form-control" name="email" style="display:inline; width:70%;" placeholder="smore@email.com"/>
                            </div>
                              <div class="mb-3">
                              <label for="phoneInput" class="form-label" style="margin-right:60px;">연락처</label>
                              <input type="tel" class="form-control" maxlength="11" name="phone"  style="display:inline; width:70%;" placeholder="(-없이) 01012345678"/>
                            </div>
                            <div class="mb-3">
                              <label for="addressInput" class="form-label" style="margin-right:50px;">주소</label>
                              <br>
                              
							<span><input type="text" id="postcode" placeholder="우편번호" name="address" style="display:inline; width:50%;" class="form-control" readonly>
							<input type="button" onclick="execDaumPostcode()" class="btn btn-white btn-hover w-20" style="display:inline; margin-left:3px;" value="우편번호 찾기" ></span>
							<input type="text" name="address" id="roadAddress" style="margin-top:10px;" placeholder="도로명주소" class="form-control" readonly/>
							<span id="guide" style="color:#999;display:none"></span>
							<input type="text" name="address" id="detailAddress" placeholder="상세주소" class="form-control" style="hover:none; margin-top:5px;" />
                              
                            </div>
                            
                            <div class="mb-4">
                              <div class="form-check"><input class="form-check-input" type="checkbox"   id="flexCheckDefault">
                                <label class="form-check-label" for="flexCheckDefault">
                                  <a href="javascript:void(0)" class="text-white text-decoration-underline">서비스이용약관</a>
                                  과
                                  <a href="javascript:void(0)"
                                    class="text-white text-decoration-underline">개인정보취급방침</a>에 동의</label>

                              </div>
                            </div>
                            <div class="text-center">
                              <button type="submit" id="enrollSubmit" value="가입" class="btn btn-white btn-hover w-100">회원가입</button>
                            </div>
                            
                         <th:block th:if="${kakaoMap} != null">
                         	<div class="text-center"></div>
                          </th:block>
                         <th:block th:if="${kakaoMap} == null">
                        	<button class="btn btn-hover kakao w-100" onMouseOver="this.style.background='#f9e000'"style="margin-top:10px;">
                          	<img class="btn-social-icon" th:src="@{/images/kakao.svg}">
                        	<a class="kakao" href="https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=db9b4636697b685acdb60e2cfea3d1e0&redirect_uri=http://localhost/member/enroll/kakao">카카오 아이디로 <span class="d-none d-sm-inline">시작하기</span></a></button>
                          </th:block>
                          </form>
                          <div class="mt-3 text-center">
                            <p class="mb-0">이미 회원이신가요? <a th:href="@{/login}"  class="fw-medium text-white text-decoration-underline"> 로그인 </a></p>
                          </div>
                        </div>
                      </div>
                    </div><!--end col-->
                  </div><!--end row-->
                </div><!--end auth-box-->
              </div><!--end col-->
            </div><!--end row-->
          </div><!--end container-->
          
          
	<script type="text/javascript">
			$(function() {
			$("#pass2").blur((event) => {
			let pass1 = $("#pass1").val();			
			let pass2 = $(event.target).val();
			
			if(pass1.trim() != pass2.trim()) {
				alert("비밀번호가 일치하지 않습니다.");
				
				$("#pass1").val("");
				$(event.target).val("");
				$("#pass1").focus();
			}
		});
    	
		    $("#enrollSubmit").on("click", () => {
		    	let regExp = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/;
		    	if(!regExp.test($("#pass1").val().trim())) {
		    		alert("비밀번호는 특수문자, 영문, 숫자를 포함하여 8자 이상입니다.");
		    		$("#pass1").val("");
					$("#pass2").val("");
					$("#pass1").focus();
		    		return false;
		    	};
		    });
		    
		    
	    // 아이디 중복을 확인하는 AJAX 코드
	    $("#checkDuplicate").on("click", () => {
	    	let id = $("#memberId").val().trim();
	    	
	    	if(id.length < 4){
	    		alert("아이디는 최소 4글자입니다.")
	    		return;
	    	}
	    	
	    	$.ajax({
	    		type:"get",
	    		url:"/member/idCheck",
	    		data:{id}, // 속성값이 키값과 같은 이름을 가질때 하나로만 key-value 채운다.
	    		success:
	    			(data)=>{ // validate key값
	    				console.log(data);
	    				if(data.validate === true){
	    					alert("이미 사용중인 아이디입니다.")
	    				} else{
	    					alert("사용 가능합니다.")
	    				}
	    			},
	    		error:
	    			(e)=>{
						console.log(e);	    				
	    			}
	    	});
	    });
	});
</script>
          
        </section>
        <!-- END SIGN-UP -->

      </div>
      <!-- End Page-content -->

    </div>
    <!-- end main content-->

  </div>
  <!-- END layout-wrapper -->

    <!-- Style switcher -->
  <a class="color-list color1" href="javascript: void(0);" onclick="setColorGreen()"></a>
  <a class="color-list color2" href="javascript: void(0);" onclick="setColor('blue')"></a>
  <a class="color-list color3" href="javascript: void(0);" onclick="setColor('green')"></a>
  <a href="javascript: void(0);" id="mode">
  <a href="javascript: void(0);" class="settings rounded-end"></a>
  </div>
  <!-- end switcher-->

  <!--start back-to-top-->
  <button onclick="topFunction()" id="back-to-top">
    <i class="mdi mdi-arrow-up"></i>
  </button>
  <!--end back-to-top-->

  <!-- JAVASCRIPT -->
  <script th:src="@{/libs/bootstrap/js/bootstrap.bundle.min.js}"></script>
  <script src="https://unicons.iconscout.com/release/v4.0.0/script/monochrome/bundle.js"></script>


  <!-- Switcher Js -->
  <script th:src="@{/js/pages/switcher.init.js}"></script>

  <!--script code-->

	<script>
/** 우편번호 찾기 */
 function execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                var roadAddr = data.roadAddress; // 도로명 주소 변수
                var extraRoadAddr = ''; // 참고 항목 변수

                if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                    extraRoadAddr += data.bname;
                }
                if(data.buildingName !== '' && data.apartment === 'Y'){
                   extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                }
                if(extraRoadAddr !== ''){
                    extraRoadAddr = ' (' + extraRoadAddr + ')';
                }

                document.getElementById('postcode').value = data.zonecode;
                document.getElementById("roadAddress").value = roadAddr;
             

                var guideTextBox = document.getElementById("guide");
                
                if(data.autoRoadAddress) {
                    var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
                    guideTextBox.innerHTML = '(예상 도로명 주소 : ' + expRoadAddr + ')';
                    guideTextBox.style.display = 'block';
                } else {
                    guideTextBox.innerHTML = '';
                    guideTextBox.style.display = 'none';
                }
            }
        }).open();
    }
</script>

</body>

</html>