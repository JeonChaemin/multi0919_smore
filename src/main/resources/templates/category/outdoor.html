<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:fragment="head" th:replace="~{common/layout :: head}"></head>
  <!--Custom Css-->
  <link rel="stylesheet" id="custom" type="text/css" th:href="@{/css/outdoor.css}">

<body>
  <!-- Begin page -->
  
  <div>
    <!--Navbar Start-->
	<header th:replace="~{common/layout :: #header}"></header>
    
    <!-- Navbar End -->

    <div class="main-content">

      <div class="page-content">

        <!-- Start home -->
         <section class="page-title-box" th:style="'background-image: linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url('+@{/images/img/hero_outdoor.jpg}+'); height: 350px; padding-top: 130px; background-position: center;'">
          <div class="container">
            <div class="row justify-content-center">
              <div class="col-md-6">
                <div class="text-center text-white">
                  <h3 class="mb-4 hero-title" style="font-weight: 400;">야외활동</h3>
                  <div class="page-next">
                    <nav class="d-inline-block" aria-label="breadcrumb text-center">
                      <ol class="breadcrumb justify-content-center">
                        <li class="breadcrumb-item"><a th:href="@{/home}">HOME</a></li>
                        <li class="breadcrumb-item"><a th:href="@{/outdoor}">LIFE</a></li>
                        <li class="breadcrumb-item active" aria-current="page"><a th:href="@{/outdoor}">OUTDOOR</a></li>
                      </ol>
                    </nav>
                  </div>
                </div>
              </div>
              <!--end col-->
            </div>
            <!--end row-->
          </div>
          <!--end container-->
        </section>
        <!-- end home -->

        <!-- START SHAPE -->
        <div class="position-relative" th:style="'z-index: 1'">
          <div class="shape">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 250">
              <path fill="#FFFFFF" fill-opacity="1"
                d="M0,192L120,202.7C240,213,480,235,720,234.7C960,235,1200,213,1320,202.7L1440,192L1440,320L1320,320C1200,320,960,320,720,320C480,320,240,320,120,320L0,320Z">
              </path>
            </svg>
          </div>
        </div>
        <!-- END SHAPE -->


        <!-- START outdoor -->
        <section class="section">
          <div class="container mt-5">
            <form th:action="@{/outdoor}" method="get">
              <div class="row g-2">
                <div class="col-lg-5 col-md-8">
                  <div class="filler-job-form">
                    <i class="mdi mdi-magnify"></i>
                    <input type="search"  name="searchValue" id="searchValue" class="form-control filter-job-input-box2"
                      th:value="${param.searchValue}" placeholder="검색어를 입력하세요. "> 
                  </div>
                </div><!--end col-->
                <div class="col-lg-2 col-md-5"> 
                  <div class="filler-job-form">
                    <i class="uil uil-clipboard-notes me-5"></i>
                    <select class="form-select filter-job-input-box2" name="searchType" id="searchType">
                      <option value="공원" th:selected="${param.searchType} == '공원'">공원</option>
                      <option value="산책로" th:selected="${param.searchType} == '산책로'">산책로</option>
                    </select>
                  </div>
                </div><!--end col-->
                <div class="col-lg-2 col-md-2">
                  <div class="filler-job-form">
                    <i class="uil uil-location-point"></i>
                    <select class="form-select filter-job-input-box2" name="regions" id="regions">
                      <option value="서울특별시" th:selected="${#arrays.contains(regions, '서울특별시')  ? 'selected' : null}">서울특별시</option>
                      <option value="부산광역시" th:selected="${#arrays.contains(regions, '부산광역시')  ? 'selected' : null}">부산광역시</option>
                      <option value="인천광역시" th:selected="${#arrays.contains(regions, '인천광역시')  ? 'selected' : null}">인천광역시</option>
                      <option value="대구광역시" th:selected="${#arrays.contains(regions, '대구광역시')  ? 'selected' : null}">대구광역시</option>
                      <option value="대전광역시" th:selected="${#arrays.contains(regions, '대전광역시')  ? 'selected' : null}">대전광역시</option>
                      <option value="광주광역시" th:selected="${#arrays.contains(regions, '광주광역시')  ? 'selected' : null}">광주광역시</option>
                      <option value="울산광역시" th:selected="${#arrays.contains(regions, '울산광역시')  ? 'selected' : null}">울산광역시</option>
                      <option value="세종특별자치시" th:selected="${#arrays.contains(regions, '세종특별자치시')  ? 'selected' : null}">세종특별자치시</option>
                      <option value="경기도" th:selected="${#arrays.contains(regions, '경기도')  ? 'selected' : null}">경기도</option>
                      <option value="강원도" th:selected="${#arrays.contains(regions, '강원도')  ? 'selected' : null}">강원도 </option>
                      <option value="충청북도" th:selected="${#arrays.contains(regions, '충청북도')  ? 'selected' : null}">충청북도</option>
                      <option value="충청남도" th:selected="${#arrays.contains(regions, '충청남도')  ? 'selected' : null}">충청남도</option>
                      <option value="전라북도" th:selected="${#arrays.contains(regions, '전라북도')  ? 'selected' : null}">전라북도</option>
                      <option value="전라남도" th:selected="${#arrays.contains(regions, '전라남도')  ? 'selected' : null}">전라남도</option>
                      <option value="경상북도" th:selected="${#arrays.contains(regions, '경상북도')  ? 'selected' : null}">경상북도</option>
                      <option value="경상남도" th:selected="${#arrays.contains(regions, '경상남도')  ? 'selected' : null}">경상남도</option>
                      <option value="제주특별자치도" th:selected="${#arrays.contains(regions, '제주특별자치도')  ? 'selected' : null}">제주특별자치도</option>
                    </select>
                  </div>
                </div><!--end col-->
                <div class="col-lg-3 col-md-5">
                  <button class="btn btn-primary w-100" type="submit"><i class="uil uil-filter"></i> 필터 적용</button>
                </div><!--end col-->
              </div><!--end row-->
            </form>


            <!-- '추천 키워드'로 변환!!! -->
            <div class="row mt-4">
              <div class="col-lg-12">
                <h6 class="fs-20 mb-3">추천 키워드</h6>
                <div class="selecte-tag position-relative">
                  <div class="choices" data-type="text" aria-haspopup="true" aria-expanded="false">
                    <div class="choices__inner">
                    <input type="text" id="choices-text-remove-button" value="서울특별시"
                        class="choices__input" hidden="" tabindex="-1" data-choice="active">
                      <div class="choices__list choices__list--multiple">
                        <div class="choices__item choices__item--selectable" data-item="" data-id="1" data-value="서울특별시"
                          data-custom-properties="null" aria-selected="true" data-deletable="" style="font-size: 15px;">서울특별시<button
                            type="button" class="choices__button" aria-label="Remove item: '서울특별시'"
                            data-button="">Remove item</button></div>
                      </div>
                      <input type="text" class="choices__input choices__input--cloned" autocomplete="off"
                        autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list"
                        aria-label="false">
                    </div>
                    <div class="choices__list choices__list--dropdown" aria-expanded="false"></div>
                  </div>
                  <!-- <input type="text" id="choices-text-remove-button" value="경기도, 서울특별시"> -->
                </div>
              </div><!--end col-->
            </div><!--end row-->


			<!-- 공원 시작 부  -->
            <!-- 인기게시글 4개 -->
            <th:block th:if="${param.searchValue} == null">
              <div class="row">
              <div class="col-lg-12 col-md-12 mt-3">
              	<div class="mt-3 mb-4"><h6 class="fs-22">인기 공원</h6></div>
                <div class="blog-post">
                  <div class="row ">
                    <!-- 인기 1 -->
                    <th:block th:each="item : ${parkList}">
                    <div class="col-lg-3 mb-4">
                      <div class="card blog-grid-box p-2"  > <!-- th:each=" i : ${#numbers.sequence(1,1)}" -->  
                        <img th:src="@{/images/img/park1.jpeg}" alt="" class="rounded-2" th:style="${'width: 250px; height: 150px;'}">
                        <div class="card-body">
                          <ul class="list-inline d-flex justify-content-between mb-0">
                            <li class="list-inline-item">
                              <p class="text-muted mb-0">[[${item.parkSe}]]</p>
                            </li>
                          </ul>
                          <h6 class="fs-20 mb-3">
                          	<a th:href="@{/outdoor/outdoor-detail(parkNo=${item.parkNo})}" class="primary-link">[[${item.parkNm}]]</a>
                          </h6>
                          <p class="text-muted fs-16"><i class="mdi mdi-map-marker"></i>[[${item.lnmadr}]]</p>
                          <div class="text-md-end">
                            <a th:href="@{/outdoor/outdoor-detail(parkNo=${item.parkNo}, searchType=${param.searchType == '공원'})}" class="form-text text-primary">상세보기 <i
                                class="mdi mdi-chevron-double-right"></i></a>
                          </div>
                        </div>
                      </div>
                    </div>
                    </th:block>
                  </div>
                </div>
              </div>
            </div>
           </th:block>

            <!-- 리스트 시작 -->
            <div class="mt-3"><h6 class="fs-22">전체 보기</h6></div>
            <th:block th:each="item : ${list}" >
            <div class="row">
              <div class="col-lg-12">
                <div class="job-box card mt-3">
                  <div class="p-4">
                    <div class="row align-items-center">
                      <div class="col-md-1">
                        <div class="text-center mb-4 mb-md-0">
                          <a th:href="@{/outdoor/outdoor-detail(parkNo=${item.parkNo})}"><img th:src="@{/images/img/free-icon-park-433102.png}" alt=""
                              th:style="'width: 50px; height: 50px;'"></a>
                        </div>
                      </div>
                      <!--end col-->
                      <div class="col-md-3">
                        <div class="mb-2 mb-md-0 ms-2">
                          <h5 class="fs-21 mb-1"><a th:href="@{/outdoor/outdoor-detail(parkNo=${item.parkNo})}" class="text-dark">[[${item.parkNm}]]</a>
                          </h5>
                          <p class="text-muted fs-14 mb-0">[[${item.parkSe}]]</p>
                        </div>
                      </div>
                      <!--end col-->
                      <div class="col-md-4">
                        <div class="d-flex">
                          <div class="flex-shrink-0">
                            <i class="mdi mdi-map-marker text-primary"></i>
                          </div>
                          <div class="flex-grow-1 ms-2">
                            <p class="text-muted fs-16 mb-0">[[${item.lnmadr}]]</p>
                          </div>
                        </div>
                      </div>
                      <!--end col-->
                      <div class="col-md-3">
                        <div class="d-flex">
                          <div class="flex-shrink-0 text-primary">
                            <i class="uil uil-phone-alt"></i>
                          </div>
                          <div class="flex-grow-1 ms-2">
                            <p class="text-muted fs-16 mb-0">[[${item.phoneNumber}]]</p>
                          </div>
                        </div>
                      </div>
                      <!-- 좋아요 수정... -->
                       <th:block th:if="${session.loginMember != null}">
					 	<div class="clip text-end favorite-icon2" th:style="'line-height: 70px;'" th:id="|clip${item.parkNo}|" th:value="${item.isClip}" th:onclick="|onClickClip('clip${item.parkNo}', '${item.parkNo}');|">
					 		<a th:style="'cursor: pointer;'"><i class="uil uil-heart-alt fs-20"></i></a>
					 	</div>
					  </th:block>
                      </div>
                      <!--end col-->
                    </div>
                    <!--end row-->
                  <div class="p-1 bg-light">
                    <div class="text-end fs-14 me-3">
                      <a th:href="@{/outdoor/outdoor-detail(parkNo=${item.parkNo})}" th:class="primary-link">상세보기 <i class="mdi mdi-chevron-double-right"></i></a>
                    </div>
                  </div>
                  </div>
                </div>
              </div>
              </th:block>
            </div>
            
            
			<!-- 산책로 시작부  -->
			<th:block th:if="${param.searchType} == '산책로' ? '산책로' : '공원'">
			
			
			</th:block>
		



			
			

            <!-- 페이지 카운트 -->
		  <th:block th:unless="${list == null || list.size == 0}">
            <div class="row">
              <div class="col-lg-12 mt-5 mb-5">
                <nav aria-label="Page navigation example">
                  <ul class="pagination job-pagination mb-0 justify-content-center">
                    <li class="page-item">
                      <a class="page-link" th:onclick="|movePage('/outdoor?page=${pageInfo.prevPage}');|" tabindex="-1"><i class="mdi mdi-chevron-double-left fs-15"></i></a>
                    </li>
	              	<th:block th:each="num, status : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}">
					  <th:block th:if="${status.current == pageInfo.currentPage}">
	                    <li class="page-item active"><a class="page-link">[[${status.current}]]</a></li>
					  </th:block>
					  <th:block th:if="${status.current != pageInfo.currentPage}">
                    	<li class="page-item"><a class="page-link" th:onclick="|movePage('/outdoor?page=${status.current}');|">[[${status.current}]]</a></li>
					  </th:block>
					</th:block>
                    <li class="page-item">
                      <a class="page-link" th:onclick="|movePage('/outdoor?page=${pageInfo.nextPage}');|">
                        <i class="mdi mdi-chevron-double-right fs-15"></i>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div><!--end col-->
            </div><!-- end row -->
          </th:block>  
            
        </section>
        </div><!--end container-->
        <!-- END JOB-LIST -->
      </div>
      <!-- End Page-content -->

  
	  <footer th:replace="~{common/layout :: #footer}"></footer>		

      <!--start back-to-top-->
      <button th:onclick="|topFunction()|" id="back-to-top">
        <i class="mdi mdi-arrow-up"></i>
      </button>
      <!--end back-to-top-->
    </div>
    <!-- end main content-->
 	


  <!-- JAVASCRIPT -->
  <!-- <script th:src="@{/js/pages/outdoor.js}"></script> -->
  <script type="text/javascript" th:inline="javascript">
  $(function(){
      // 하트 class 초기화
      heartItems = document.getElementsByClassName('heart');
      for(i = 0; i < heartItems.length; i++){
          heartValue = JSON.parse(heartItems[i].getAttribute('value'));

          if(heartValue == 1){
              heartItems[i].innerHTML = '<img src="/images/heart-fill.svg">';
          }else{
              heartItems[i].innerHTML = '<img src="/images/heart.svg">';
          }
      }
  });

  /* 좋아요 */
  function onClickLike(id, addLike) {
  	likeValue = new Number($('#' + id).text());
  	likeValue += new Number(addLike);
  	// 여기에 AJAX로 DB 업데이트하는 코드 있어야함!!

  	$.ajax({
  		method: 'get',
  		url: '/trade/clip?tradeNo=' + tradeNo + '&clipCount=' + likeValue,
  		contentType: 'application/json',
  		dataType: 'json',
  		success: (result) => {
  			$('#' + id).attr('value', '' + result);

  			$('#' + id).text((likeValue > 0 ? '+' : '') + likeValue);

  		},
  		error: (e) => {
  			alert('전송 실패!!');
  		}
  	});

  }

  function onClickClip(id, parkNo) {
  	clipValue = JSON.parse($('#' + id).attr('value'));
  	if (clipValue == 0) {
  		clipValue = 1;
  	} else {
  		clipValue = 0;
  	}
  	// 여기에 AJAX로 DB 업데이트하는 코드 있어야함!!
  	$.ajax({
  		method: 'get',
  		url: '/outdoor/clip?parkNo=' + parkNo + '&isClip=' + clipValue,
  		contentType: 'application/json',
  		dataType: 'json',
  		success: (result) => {
  			$('#' + id).attr('value', '' + result);
  			if (result == 1) {
  				/*$('#'+id).html('<img src="/images/heart-fill.svg">');*/
  				$('#' + id).addClass("active")
  			} else {
  				/*$('#'+id).html('<img src="/images/heart.svg">');*/
  				$('#' + id).removeClass("active")
  			}
  		},
  		error: (e) => {
  			alert('전송 실패!!');
  		}
  	});
  }

  /* 페이징  */
  function movePage(pageUrl){
  		var searchValue = document.getElementById("searchValue"); 
  		if(searchValue != null){
  			pageUrl += '&searchValue=' + searchValue.value;
  		}
  		
  		var searchTypes = document.getElementById("searchType");  		
  		var value = (searchTypes.options[searchTypes.selectedIndex].value);
  		pageUrl += '&searchType=' + value;
  		
  		var region = document.getElementById("regions");
  		var value2 = (region.options[region.selectedIndex].value);
  		pageUrl += '&regions=' + value2;
  		
  		
  		// alert(pageUrl);
  		location.href = encodeURI(pageUrl);	
  	}
  
  	
  </script>
	
	
  <script th:src="@{/libs/bootstrap/js/bootstrap.bundle.min.js}"></script>
  <script th:src="@{https://unicons.iconscout.com/release/v4.0.0/script/monochrome/bundle.js}"></script>

  <!-- Choice Js -->
  <script th:src="@{/libs/choices.js/public/assets/scripts/choices.min.js}"></script>

  <!-- Job Init Js -->
  <script th:src="@{/js/pages/job-list.init.js}"></script>

  <!-- Job-Grid Js -->
  <script th:src="@{/js/pages/job-grid.init.js}"></script>

  <!-- Switcher Js -->
  <script th:src="@{/js/pages/switcher.init.js}"></script>

  <!-- App Js -->
  <script th:src="@{/js/app.js}"></script>

  <!-- Custom Js -->
  <script th:src="@{/js/pages/favorite.js}"></script>
</body>

</html>